<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="https://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  <title>
    
      트러블 슈팅 도커 - 도커 용어 정리 &middot; Hydeout
    
  </title>

  


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" />
  

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface" />

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png" />
<link rel="shortcut icon" href="/favicon.ico" />

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" />

  <!-- Additional head bits without overriding original head -->

  <script data-ad-client="ca-pub-1500563695249828" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!---->
</head>


  <body class="post">

    <div id="sidebar">
  <header>
    <div class="site-title">
      <a href="/">
        
          <span class="back-arrow icon"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 0h24v24H0z" fill="none"/>
  <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
</svg></span>
        
        Hydeout
      </a>
    </div>
    <p class="lead">The <a href="http://hyde.getpoole.com" target="_blank">Hyde</a> theme for <a href="http://jekyllrb.com" target="_blank">Jekyll</a>, refreshed.</p>
  </header>
  <nav id="sidebar-nav-links">
  
    <a class="home-link "
        href="/">Home</a>
  
  

  

  


  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  

  
    
  

  
    
  

  

  
    
  

  
    
  

  
    
  


  


  
    
  

  
    
      <a class="category-link "
          href="/category/Algorithm">Algorithm</a>
    
  

  
    
      <a class="category-link "
          href="/category/Clean">Clean Code</a>
    
  

  
    
      <a class="category-link "
          href="/category/Docker">Docker</a>
    
  

  
    
      <a class="category-link "
          href="/category/GCP">GCP</a>
    
  

  
    
      <a class="category-link "
          href="/category/concept">concept</a>
    
  

  
    
  

  

  
    
  

  
    
  

  

  
    
  

  
    
  

  
    
  


  <!-- Optional additional links to insert in sidebar nav -->
</nav>


  

  <nav id="sidebar-icon-links">
  

  <a id="subscribe-link"
     class="icon" title="Subscribe" aria-label="Subscribe"
     href="/feed.xml">
    <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <circle cx="6.18" cy="17.82" r="2.18"/>
    <path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/>
</svg>
  </a>

  
  
  
  

  
    <a id="tags-link"
       class="icon"
       title="Tags" aria-label="Tags"
       href="/tags.html">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
    </a>
  

  
    <a id="search-link"
       class="icon"
       title="Search" aria-label="Search"
       href="/search.html">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>
    </a>
  

  <!-- Optional additional links to insert for icons links -->
</nav>

  <p>
  &copy; 2020.
  <a href="/LICENSE.md">MIT License.</a>
</p>

</div>

    <main class="container">
      <header>
  <h1 class="post-title">트러블 슈팅 도커 - 도커 용어 정리</h1>
</header>
<div class="content">
  <div class="post-meta">
  <span class="post-date">07 Dec 2020</span>
  <span class="post-categories">
    
      &bull;

      
      
      

      
        <a href="/category/Docker">
          Docker
        </a>
      
    
  </span>
</div>


  <div class="post-body">
    <h2 id="용어-정리">용어 정리</h2>

<p>이 책을 보다보면 이러한 용어가 많이 나오는데 이 용어에 대해서 먼저 정리를 해야될 것 같다.</p>
<h5 id="인스트럭션">인스트럭션</h5>
<ul>
  <li><code class="highlighter-rouge">컴퓨터가 어느 정보를 가지고 어떠한 처리를 하는가를 나타낸다.</code></li>
</ul>

<h4 id="from-">FROM <br /></h4>
<ul>
  <li>이미지를 가져올 (pull) 할 베이스
    <ul>
      <li>이미지에 대해 수행할 연산을 논리적으로 묶어서 레이어의 수를 최소화 하는 것이 좋다.
        <ul>
          <li>예를 들어 애플리케이션의 의존성에 관련된 패키지를 설치할 때는 각각을 별도의 디렉티브로 지정하지 않고 하나의 RUN 디렉티브로 묶어서 한꺼번에 설치하는 것이 좋다.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>이미지 정의
    <ul>
      <li>로컬 이미지</li>
      <li>도커 공용 레지스트리</li>
      <li>사설 레지스트리</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">FROM</code> 지점에서 부터 빌드 작업 시작</li>
  <li>로컬 이미지 제작에 사용할 베이스 이미지 지정</li>
  <li>도커파일에 제일 먼저 나와야 한다.</li>
  <li>빌드 하는데 반드시 필요한 요소</li>
</ul>

<h4 id="maintainer">MAINTAINER</h4>
<ul>
  <li>빌드할 이미지의 제작자 명시</li>
  <li>옵션 값이므로 없어도 문제없음.</li>
  <li>FROM 뒤 어느곳에 둬도 상관 없다.</li>
</ul>

<h4 id="env">ENV</h4>
<ul>
  <li>도커 파일에 환경변수 설정</li>
  <li>ENV <키> <값>
</값></키>    <ul>
      <li>ENV <키1>=<값1> <키2>=<값2></값2></키2></값1></키1></li>
      <li>ENV “키1 값1 키2 값2” -&gt; 빈 공간이 있을때는 <code class="highlighter-rouge">" "</code> 으로 감싸줘야 한다.</li>
    </ul>
  </li>
  <li>여러개의 환경변수 정의 할 때 하나의 인스트럭션으로 표현된다.
    <ul>
      <li>환경변수는 이미지에서 컨테이너 생성할 때 사용할 수 있다.</li>
      <li><code class="highlighter-rouge">docker inspect &lt; 이미지 &gt;</code></li>
      <li><code class="highlighter-rouge">docker run</code> 명령을 실행할 때, <code class="highlighter-rouge">--env &lt;키&gt; = &lt;값&gt;</code> 옵션 지정 하면 환경변수의 값 변경이 가능하다.</li>
    </ul>
  </li>
</ul>

<h4 id="run">RUN</h4>
<ul>
  <li>명령을 실행 해서 그 결과를 새로운 레이어로 생성한다.</li>
  <li>RUN 인스트럭션으로 전달한 명령은 이 인스트럭션이 나오기 전에 있던 레이어에서 실행된다.
<code class="highlighter-rouge">따라서 순서에 주의해야한다.</code></li>
</ul>

<p>** 주요 구문</p>

<p><code class="highlighter-rouge">RUN &lt;명령&gt;</code></p>
<ul>
  <li>
    <명령>으로 명시한 명령은 셸(`/bin/sh -c`)에서 실행된다.

</명령>
  </li>
</ul>
<p><code class="highlighter-rouge">RUN ["실행파일", "매개변수1", "매개변수2"]</code> <br />
실행할 명령을 <code class="highlighter-rouge">실행파일</code> (절대경로) 과 <code class="highlighter-rouge">매개변수</code> 형태로 지정했다.</p>

<p>베이스 이미지 /bin/sh 없을때 지정해야 한다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>여기서 지정하는 실행 파일이 베이스 이미지에 존재하는 유일한 실행파일
실행한 결과를 토대로 레이어 생성
</code></pre></div></div>

<p><code class="highlighter-rouge">RUN ["/bins/bash", "-c", "echo True!"]</code></p>

<p><code class="highlighter-rouge">RUN &lt;명령1&gt; ; &lt;명령2&gt;</code></p>

<p>이렇게 작성하면 여러개의 명령을 <code class="highlighter-rouge">;</code> 로 구분해 지정할 수 있다.<br />
RUM 인스트럭션은 이렇게 지정된 명령을 한꺼번에 실행하며, 명령의 결과를 모아서 하나의 레이어로 빌드한다.</p>

<p><code class="highlighter-rouge">도커 컨테이너의 파일 시스템과 컨텍스트에서 실행할 수 있는것 이라면 무엇이든 적을 수 있다.</code></p>

<h4 id="add">ADD</h4>
<ul>
  <li>로컬파일 시스템이나 원격 URL에 있는 파일이나 디렉터리를 이미지로 복사할 때 사용된다.</li>
</ul>

<p><code class="highlighter-rouge">ADD &lt;소스파일&gt; &lt;목적지 디렉터리&gt;</code><br />
여기서 <소스파일> 빌드 컨텍스트에 상대적인 위치로 지정한다.</소스파일></p>

<p><code class="highlighter-rouge">목적지 디렉터리</code></p>
<ul>
  <li>현재 작업 디렉토리에 대한 상대경로로 지정해도 되고 절대경로로 지정해도 된다.</li>
</ul>

<p><code class="highlighter-rouge"> ADD &lt;파일1&gt; &lt;파일2&gt; &lt;파일3&gt; &lt;목적지&gt;</code><br />
여러개의 파일을 복사할 수 있도록 지정할 수 있다.<br />
이때 소스파일의 경로는 반드시 빌드 컨텍스트의 상대경로로 지정</p>

<p><code class="highlighter-rouge">ADD &lt;소스디렉토리&gt; &lt;목적지 디렉토리&gt;</code><br />
소스디렉토리 담긴 내용이 목적지에 복사 된다.
<br /> 이때 파일 시스템의 메타데이터도 함께 복사된다
<br /> <code class="highlighter-rouge">디렉토리는 복사되지 않는다.</code></p>

<h4 id="cmd">CMD</h4>
<ul>
  <li>컨테이너가 실행될 때 디폴트 값을 전달하기 위한 용도로 주로 사용<br />
이때, 디폴트 값으로 실행파일을 지정할 때는 반드시 <code class="highlighter-rouge">ENTRYPOINT</code> 인스트럭션도 함께 지정해야 한다.</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> - docker run 명령에 대한 인자를 지정했다면, CMD 인스트럭션에 지정된 디폴트 값을 무시한다.
 - 컨테이너를 구동할 때 마다 동일한 실행파일을 실행 시키고 싶다면, CMD &amp; ENTRYPOINT 조합하는것이 좋다.
</code></pre></div></div>

<h3 id="cmd-vs-run">CMD vs RUN</h3>
<ul>
  <li>RUN
    <ul>
      <li>이미지를 빌드하는 동안 실제로 명령을 실행한 후, 결과를 커밋해서 레이어 추가</li>
    </ul>
  </li>
  <li>CMD
    <ul>
      <li>빌드하는 동안 실행 안함.</li>
      <li>컨테이너에서 실행할 이미지를 지정하기만 한다.</li>
      <li>도커파일은 하나의 CMD만 실행 가능하다.
  (여러개 나오는 경우는 마지막의 CMD만 실행 가능하다.)</li>
    </ul>
  </li>
</ul>


    



<div class="post-tags">
  
</div>
  </div>

  
  <section class="comments">
    <h2>Comments</h2>
    
  <div id="disqus_thread">
    <button class="disqus-load" onClick="loadDisqusComments()">
      Load Comments
    </button>
  </div>
  <script>

  /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW
  *  TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT:s
  *  https://disqus.com/admin/universalcode/#configuration-variables
  */
  var disqus_config = function () {
    this.page.url = "http://localhost:4000/docker/2020/12/07/trouble-shooting-docker-term.html";
    this.page.identifier = "" ||
                           "http://localhost:4000/docker/2020/12/07/trouble-shooting-docker-term.html";
  }
  function loadDisqusComments() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//eunjju.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  }
  (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//eunjju.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();

  </script>
  <noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript">comments powered by Disqus</a>.
  </noscript>



  </section>

  <section class="related">
  <h2>Related Posts</h2>
  <ul class="posts-list">
    
      <li>
        <h3>
          <a href="/docker/2020/12/04/trouble-shooting-docker.html">
            트러블 슈팅 도커 - 도커 개념
            <small>04 Dec 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/docker/2020/11/19/docker-term.html">
            dockerfile 생성
            <small>19 Nov 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/gcp/2020/08/31/gcp-cicd-gke.html">
            GCP CI/CD (2)
            <small>31 Aug 2020</small>
          </a>
        </h3>
      </li>
    
  </ul>
</section>

</div>

    </main>

    <!-- Optional footer content -->

  </body>
</html>
